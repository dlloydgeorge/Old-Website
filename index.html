<!DOCTYPE html>
<html lang="eng">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuDecoDev</title>
    <link rel="stylesheet" href="css/styles.css">

</head>
<body>
    <div class="navbar">
        <a href="explanation.html">Background</a>
        <a href="index.html" class="active">Game</a>
    </div>

    <div id="container">
        <div id="threeCanvas"></div>
        <div id="buttonsContainer">
            <button onclick="toggleAnimation()">Toggle Animation</button>
            <button onclick="changeColor()">Change Color</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script type="module">
        let camera, scene, renderer;
        let bloch_sphere_radius = .8 * Math.min(window.innerHeight, window.innerHeight)

        // Initialize Three js stuff
        function init() {

            // Set up the scene, camera, and renderer
            scene = new THREE.Scene();

            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 5;

            renderer = new THREE.WebGLRenderer( {antialias: true});
            renderer.setSize(window.innerWidth * 0.7, window.innerHeight);
            document.getElementById('threeCanvas').appendChild(renderer.domElement);

            // Create arrow geometry
            const arrowGeometry = new THREE.ConeGeometry(0.1, 0.5, 32);
            let arrowMaterial = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
            const arrow = new THREE.Mesh(arrowGeometry, arrowMaterial);
            scene.add(arrow);
            arrow.position.z = -5;

            const sphereGeometry = new THREE.SphereGeometry(bloch_sphere_radius, 32, 32 );
			const sphereMaterial = new THREE.MeshBasicMaterial( { color: 0xcccccc, wireframe: true, transparent: true, opacity: 0.3 } );
			const sphere = new THREE.Mesh( sphereGeometry, sphereMaterial );
			scene.add(sphere);

        }
        
        

        // Animate the arrow
        let isAnimating = true;
        function animate() {
            if (isAnimating) {
                requestAnimationFrame(animate);

                // Rotate the arrow
                arrow.rotation.y += 0.01;

                renderer.render(scene, camera);
            }
        }

        // Toggle animation
        function toggleAnimation() {
            isAnimating = !isAnimating;
        }

        // Change arrow color
        function changeColor() {
            const color = new THREE.Color(Math.random(), Math.random(), Math.random());
            arrowMaterial = new THREE.MeshBasicMaterial({ color: color });
            arrow.material = arrowMaterial;
        }

        // Start the animation
        init();
        animate();
    </script>
</body>
</html>
